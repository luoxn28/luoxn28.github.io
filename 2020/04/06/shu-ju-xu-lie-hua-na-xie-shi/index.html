<!DOCTYPE html><html lang="zh-CN"><head><meta name="generator" content="Hexo 3.9.0"><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content="该来的终究会来，而且比想象的更快！"><title>数据序列化那些事 | luoxn28</title><link rel="stylesheet" type="text/css" href="/css/style.css?v=0.0.0"><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/normalize/8.0.1/normalize.min.css"><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/pure/1.0.0/pure-min.css"><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/pure/1.0.0/grids-responsive-min.css"><link rel="stylesheet" href="//lib.baomitu.com/font-awesome/4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//lib.baomitu.com/jquery/3.4.0/jquery.min.js"></script><link rel="icon" mask sizes="any" href="/favicon.ico"><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"><link rel="alternate" type="application/atom+xml" href="/atom.xml"><link rel="stylesheet" href="/css/prism-tomorrow.css" type="text/css"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">数据序列化那些事</h1><a id="logo" href="/.">luoxn28</a><p class="description">南</p></div><div id="nav-menu"><a class="current" href="/."><i class="fa fa-home"> 首页</i></a><a href="/archives/"><i class="fa fa-archive"> 归档</i></a><a href="/tags/"><i class="fa fa-tags"> 标签</i></a><a href="/about/"><i class="fa fa-user"> 关于</i></a><a href="/atom.xml"><i class="fa fa-rss"> 订阅</i></a></div></div><div class="pure-g" id="layout"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">数据序列化那些事</h1><div class="post-meta">Apr 6, 2020<span> | </span><span class="category"><a href="/categories/分布式/">分布式</a></span><script src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" async></script><span id="busuanzi_container_page_pv"> | <span id="busuanzi_value_page_pv"></span><span> 阅读</span></span></div><div class="clear"><div class="toc-article" id="toc"><div class="toc-title">文章目录</div></div></div><div class="post-content"><blockquote>
<p>关于数据序列化，首先要了解为什么需要序列化以及数据序列化的意义是什么，然后再了解下当前较为广泛的几种序列化方式。</p>
</blockquote>
<p><strong>为什么需要数据序列化呢</strong>？因为数据要“传输”，比如将数据网络通信传递给其他服务器，或者持久化到磁盘。那么<strong>传输为什么需要序列化呢</strong>？因此在内存中的数据，当前进程是知道数据格式和内容的，但是数据传输是二进制（或文本格式），所以需要有一个内存数据格式转换为二进制（或文本格式）的过程。数据序列化，可以进行数据压缩、数据格式多语言兼容等。下面就按照序列化的技术演变过程一起看下序列化的发展之路。</p>
<p><strong>文本格式序列化</strong></p>
<p>直接将数据转变为文本格式，也就是字符串形式的文本保存，如果一个数据存在多个字段可使用固定分隔符（比如”,”）分隔，该方案存储简单但是针对复杂对象比如嵌套数据，存储起来较为麻烦，并且无法表示本来就是二进制格式的数据，比如图片、视频等。</p>
<p><strong>语言内置序列化</strong></p>
<p>目前编程语言基本都内置了至少一种数据序列化机制，比如Java的 Serialization、Python的pickle等，语言内置的序列化机制大都和该语言绑定，也就是说反序列化也必须是该语言才行，因此很难做到跨语言的读取写入。</p>
<p><strong>跨语言序列化</strong></p>
<p>语言内置的序列化大都和语言绑定，因此有了应用范围广泛、跨语言的数据序列化格式，例如json、xml等，但是这些跨语言序列化方案存在的最大劣势就是有性能问题，并且无数据类型信息，同时数据序列化冗余较大，比如json会保存每个属性名字。除了json和xml这种跨语言序列化之外，还有类似于hession这种跨语言序列化（这是序列化框架本身支持跨语言，目前只会Python/Java/C++等）的机制，序列化数据是二进制格式，并且包含数据类型信息。</p>
<p><strong>带schema描述序列化</strong></p>
<p>带有schema描述的数据表示格式，通过统一化的schema描述，可约束每个字段的类型，进而为存储和解析数据带来优化的可能。此外，统一schema的引入，可减少属性名称重复存储带来的开销，同时，也有利于数据共享。带有schema描述的序列化常用的有<code>Thrift、Protocol Buffers和Avro</code>，它们一般被称为<code>Language Of Data</code>，使得跨语言序列化成为可能，并且它们提供了代码生成工具，方便为开发者生成各个语言的代码。Language Of Data具有特性如下：</p>
<ul>
<li>提供<code>IDL（Interface Description language）</code>用以描述数据schema，用来定义结构化或者非结构化数据；</li>
<li>跨语言支持，至少支持<code>Java、Python和C/C++</code>；</li>
<li>数据编码压缩，比如字符串压缩和整数变长编码等；</li>
<li>数据序列化兼容，保证序列化的向后兼容性，比如旧schema序列化的数据可由新schema反序列化，新schema序列化也可以由旧schema解析等。</li>
</ul>
<p>关于protobuf为什么这么快可以参考文档：<a href="https://www.jianshu.com/p/72108f0aefca" target="_blank" rel="noopener">https://www.jianshu.com/p/72108f0aefca</a></p>
</div><div><ul class="post-copyright"><li class="post-copyright-author"><strong>本文作者：</strong>luoxn28</li><li class="post-copyright-link"><strong>本文链接：</strong><a href="/2020/04/06/shu-ju-xu-lie-hua-na-xie-shi/">http://luoxn28.github.io/2020/04/06/shu-ju-xu-lie-hua-na-xie-shi/</a></li><li class="post-copyright-license"><strong>版权声明：</strong>本文章著作权归作者所有，任何形式的转载都请注明出处。</li></ul></div><br><script type="text/javascript" src="/js/share.js?v=0.0.0" async></script><a class="article-share-link" data-url="http://luoxn28.github.io/2020/04/06/shu-ju-xu-lie-hua-na-xie-shi/" data-id="ck8ri1p1u00398ncirfvkbnzu" data-qrcode="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAN4AAADeCAAAAAB3DOFrAAACtklEQVR42u3aQW4CMQwFUO5/aSp11UVn+n+cAJVeVijQIY9F7Np+POL1/F4/X//cST5/9e7Vzv0zNy88PDy8paNfrZx0/+T7Iz7jlZ8ZDw8P7zTvRDDIYcm3tE/Dw8PD+wTe1aWcX/RtYn1/Bjw8PLz/wktKA+3PMT8PHh4e3ut5yT//9+lyXiC42rnfP15rwcPDw4t5aw2w974+3t/Dw8PDW+qqJ5f7pEmWk9YWHh4e3glekrbmxYKkgNuWgCdjCnh4eHgneHnpoU12k4CxVlBIChyXcQ8PDw9vE2/tam5T7bXUuS0T//IfAx4eHt4BXn5lty38PJlOwkwbPPDw8PBO83Zd6JPWWhJaiu/Fw8PDewlvbb9NxPMSRh4Y6loLHh4e3gHefDwrL+kmDbZ6oAEPDw/vAK8dBcgPPSlDtMXlP3bw8PDwDvDyD61d620KHh23PSEeHh7eJt4zXnvbVG0Sv7kBhoeHhzfgJW3+vK80SYJ3hZbLYgQeHh7eVt48K5+UffOSRHtCPDw8vBO8djggDxLtOMKuwHNZjMDDw8PbyssBbXPrRAqe/5R4eHh4J3j3j1g7YnKsPJwkCXTd38PDw8PbxEvqFpPXeWKdBCE8PDy89/KSxvze8dM2BR8VdvHw8PAO89ZCRV6wWBsI2BYY8PDw8Ma8/AreFR6SgYO2/YaHh4f3Xl6e4E4GpybJdNEMw8PDwzvAa1cySrW31LvWZnusLTw8PLyA9yxXfri1d/N0OQoVeHh4eAd4bUiYX/E5ae/PioeHh7eXlweDvJSw9lftJ0dDV3h4eHhjXlvDyDG79vPkO3obDw8P7yW8vOFUX99BopyHIjw8PLzP5CWPzksJ7ShA8XPj4eHhHePlxYi2QJBXjidh5nIHDw8P7wBvrQHWHqVNo/NSyGiODA8PD6/jfQFnIn2C6H8JhAAAAABJRU5ErkJggg==">分享</a><div class="tags"></div><div class="post-nav"><a class="pre" href="/2020/04/06/da-shu-ju-cun-chu-de-mi-mi-zhi-fen-qu/">大数据存储的秘密之分区</a><a class="next" href="/2020/04/06/gao-ke-yong-de-ben-zhi-fu-zhi/">高可用的本质-复制</a></div><div id="container"></div><link rel="stylesheet" type="text/css" href="//unpkg.com/gitalk/dist/gitalk.css?v=0.0.0"><script type="text/javascript" src="//cdn.bootcss.com/blueimp-md5/2.10.0/js/md5.js?v=0.0.0"></script><script type="text/javascript" src="//unpkg.com/gitalk/dist/gitalk.min.js?v=0.0.0"></script><script>var gitalk = new Gitalk({
  clientID: '0eda0c4ea18dd9042b41',
  clientSecret: 'df032ab700b83adbcaaf2f74eee0004c1ada25df',
  repo: 'luoxn28.github.io.gittalk',
  owner: 'luoxn28',
  admin: ['luoxn28'],
  id: md5(location.pathname),
  distractionFreeMode: false
})
gitalk.render('container')
</script></div></div></div><div class="pure-u-1-4 hidden_mid_and_down"><div id="sidebar"><div class="widget"><div class="search-form"><input id="local-search-input" placeholder="Search" type="text" name="q" results="0"><div id="local-search-result"></div></div></div><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> 分类</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Java/">Java</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/分布式/">分布式</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/操作系统/">操作系统</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/数据库/">数据库</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/框架研究/">框架研究</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/随笔/">随笔</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> 标签</i></div><div class="tagcloud"><a href="/tags/多线程/" style="font-size: 15px;">多线程</a> <a href="/tags/docker/" style="font-size: 15px;">docker</a> <a href="/tags/netty/" style="font-size: 15px;">netty</a> <a href="/tags/redis/" style="font-size: 15px;">redis</a> <a href="/tags/influxdb/" style="font-size: 15px;">influxdb</a> <a href="/tags/kubernetes/" style="font-size: 15px;">kubernetes</a> <a href="/tags/sentinel/" style="font-size: 15px;">sentinel</a> <a href="/tags/线上问题/" style="font-size: 15px;">线上问题</a> <a href="/tags/dubbo/" style="font-size: 15px;">dubbo</a> <a href="/tags/Linux/" style="font-size: 15px;">Linux</a> <a href="/tags/计算机网络/" style="font-size: 15px;">计算机网络</a> <a href="/tags/mysql/" style="font-size: 15px;">mysql</a> <a href="/tags/服务治理/" style="font-size: 15px;">服务治理</a> <a href="/tags/设计模式/" style="font-size: 15px;">设计模式</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> 最近文章</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2020/07/03/dubbo-de-fa-zhan-li-cheng/">dubbo的发展历程</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/06/20/ze-ren-lian-de-2-chong-shi-xian-fang-shi/">责任链的2种实现方式</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/04/19/linux-mmap/">Linux mmap</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/04/19/linux-guan-dao/">Linux管道</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/04/19/wang-luo-shu-ju-shi-ru-he-chuan-di-gei-jin-cheng-de/">网络数据是如何传递给进程的</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/04/18/jin-cheng-shi-ru-he-diao-du-de/">进程是如何调度的</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/04/18/cong-socket-api-kan-wang-luo-tong-xin-liu-cheng/">从sockert api看网络通信流程</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/04/18/tan-yi-tan-tcp-de-4-ci-hui-shou/">谈一谈TCP的4次挥手</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/04/17/shen-ru-li-jie-tcp-de-3-ci-wo-shou/">深入理解TCP的3次握手</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/04/12/linux-xin-hao/">Linux信号</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-external-link"> 友情链接</i></div><ul></ul><a href="http://www.example1.com/" title="site-name1" target="_blank">site-name1</a><ul></ul><a href="http://www.example2.com/" title="site-name2" target="_blank">site-name2</a><ul></ul><a href="http://www.example3.com/" title="site-name3" target="_blank">site-name3</a></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">Copyright © 2020 <a href="/." rel="nofollow">luoxn28.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div></div></div><a class="show" id="rocket" href="#top"></a><script type="text/javascript" src="/js/totop.js?v=0.0.0" async></script><script type="text/javascript" src="//lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js" async></script><script type="text/javascript" src="/js/fancybox.js?v=0.0.0" async></script><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css"><script type="text/javascript" src="/js/search.js?v=0.0.0"></script><script>var search_path = 'search.xml';
if (search_path.length == 0) {
   search_path = 'search.xml';
}
var path = '/' + search_path;
searchFunc(path, 'local-search-input', 'local-search-result');
</script><script type="text/javascript" src="/js/codeblock-resizer.js?v=0.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=0.0.0"></script></div></body></html>