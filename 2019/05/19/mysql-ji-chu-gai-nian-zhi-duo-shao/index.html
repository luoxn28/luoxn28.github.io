<!DOCTYPE html><html lang="zh-CN"><head><meta name="generator" content="Hexo 3.9.0"><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content="该来的终究会来，而且比想象的更快！"><title>MySQL基础概念知多少 | luoxn28</title><link rel="stylesheet" type="text/css" href="/css/style.css?v=0.0.0"><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/normalize/8.0.1/normalize.min.css"><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/pure/1.0.0/pure-min.css"><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/pure/1.0.0/grids-responsive-min.css"><link rel="stylesheet" href="//lib.baomitu.com/font-awesome/4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//lib.baomitu.com/jquery/3.4.0/jquery.min.js"></script><link rel="icon" mask sizes="any" href="/favicon.ico"><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"><link rel="alternate" type="application/atom+xml" href="/atom.xml"><link rel="stylesheet" href="/css/prism-tomorrow.css" type="text/css"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">MySQL基础概念知多少</h1><a id="logo" href="/.">luoxn28</a><p class="description">南</p></div><div id="nav-menu"><a class="current" href="/."><i class="fa fa-home"> 首页</i></a><a href="/archives/"><i class="fa fa-archive"> 归档</i></a><a href="/about/"><i class="fa fa-user"> 关于</i></a><a href="/atom.xml"><i class="fa fa-rss"> 订阅</i></a></div></div><div class="pure-g" id="layout"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">MySQL基础概念知多少</h1><div class="post-meta">May 19, 2019<span> | </span><span class="category"><a href="/categories/MySQL/">MySQL</a></span><script src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" async></script><span id="busuanzi_container_page_pv"> | <span id="busuanzi_value_page_pv"></span><span> 阅读</span></span></div><div class="clear"><div class="toc-article" id="toc"><div class="toc-title">文章目录</div><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#三大范式"><span class="toc-number">1.</span> <span class="toc-text">三大范式</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ACID"><span class="toc-number">2.</span> <span class="toc-text">ACID</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#隔离级别"><span class="toc-number">3.</span> <span class="toc-text">隔离级别</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#幻读问题"><span class="toc-number">4.</span> <span class="toc-text">幻读问题</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#常见索引结构"><span class="toc-number">5.</span> <span class="toc-text">常见索引结构</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#聚集索引和非聚集索引"><span class="toc-number">6.</span> <span class="toc-text">聚集索引和非聚集索引</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#几个日志"><span class="toc-number">7.</span> <span class="toc-text">几个日志</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#几个文件"><span class="toc-number">8.</span> <span class="toc-text">几个文件</span></a></li></ol></div></div><div class="post-content"><blockquote>
<p>MySQL基础概念相关的名词还是挺多的，比如3大范式、4种隔离界别、ACID、DQL、DML、DDL，还有redo、undo、binlog等，本文就统一整理下MySQL常见的基础概念，方便小伙伴们翻阅~</p>
</blockquote>
<p>MySQL相关的名词概念还是挺多的，但是常用的也不多，因此将常用的统计整理下，便于回顾：</p>
<ul>
<li><strong>DQL</strong>：data query language，指SELECT查询语句；</li>
<li><strong> DML</strong>：data manipulation language，指SELECT、UPDATE、INSERT、DELETE这4种对数据操控语句；</li>
<li><strong>DDL</strong>：data definition language，数据定义语句，创建/修改/删除表结构，主要有CREATE、ALTER、DROP等；</li>
<li><strong>MDL锁</strong>：Metadata Locking，这里的metalock指的是数据库及表的结构信息。MySQL中，DDL不属于事务范畴，如果事务和DDL并行执行，操作相关联的表的话，会出现各种意想不到问题，导致事务特性被破坏或者<a href="https://bugs.mysql.com/bug.php?id=989" target="_blank" rel="noopener">binlog顺序错乱</a>等，为解决这些问题而引入MDL锁机制。</li>
</ul>
<h2 id="三大范式"><a href="#三大范式" class="headerlink" title="三大范式"></a>三大范式</h2><ul>
<li>第一范式：每个字段都是原子的，也就说不可再分解；</li>
<li>第二范式：有主键，非主键字段依赖主键字段；</li>
<li>第三范式：非主键之间不能相互依赖。</li>
</ul>
<p>注意，三大范式是数据表的建议设计原则，并不是非得完全按照这个来设计，具体设计还要根据实际场景来分析。任何给定的数据通常有多种表示方法，完全的范式话和反范式化，以及二者的折中。在范式化数据库中，任何数据都会出现且只出现一次，相反在反范式化中，数据是冗余的。</p>
<h2 id="ACID"><a href="#ACID" class="headerlink" title="ACID"></a>ACID</h2><p>ACID是事务的4个特性，分别是原子性、一致性、隔离性和持久性。</p>
<ul>
<li>A：atomicity，原子性，一个事务必须被视为一个不可分割的最小工作单元，整个事务中的所有操作要么全部提交成功，要么全部失败回滚；</li>
<li>C：consistency，一致性，数据库总是从一个一致性的状态转换到另一个一致性的状态；</li>
<li>I：isolation，隔离性，通常来说，一个事务所做的修改在最终提交以前，对其他事务是不可见的（隔离级别在非提交读时不满足）；</li>
<li>D：一旦事务提交，则其所做的修改就会永久保存到数据库中。</li>
</ul>
<h2 id="隔离级别"><a href="#隔离级别" class="headerlink" title="隔离级别"></a>隔离级别</h2><p>数据库事务的4种隔离级别：</p>
<ul>
<li>未提交读：一个事务可以读到另外一个事务未提交的数据。</li>
<li>提交度：一个事务更新数据过程中，如果事务还未提交，其他事务读不到该数据。</li>
<li>可重复读：该级别保证了在同一个事务中，多次读取同样记录的结果是一样的，解决了“提交读”中不可重复读的问题。但是理论上还是无法解决幻读问题（通过间隙锁可解决幻读问题）。</li>
<li>串行化：将所有事务都进行串行化处理，等级最高的隔离级别。</li>
</ul>
<h2 id="幻读问题"><a href="#幻读问题" class="headerlink" title="幻读问题"></a>幻读问题</h2><p>幻读就是当事务在读取某个范围数据时，另一个事务又在该范围插入了新的数据，当之前的事务再次读取该范围数据时，就会产生幻行。产生幻读的原因是之前的事务在读取数据的范围没有增加范围锁（range-locks），也就是读取时只是锁定的行级共享锁，没有锁定整个查询区间或者表。</p>
<h2 id="常见索引结构"><a href="#常见索引结构" class="headerlink" title="常见索引结构"></a>常见索引结构</h2><ul>
<li>B+树索引：B+ 树是关系型数据库中常见的索引类型。注意：B+树所以并不能找到一个给定键值的具体行，只能找到被查找数据行所在的页，然后数据库将页读入内存，在内存中进行查找，最后得到要查找的数据；</li>
<li>哈希索引：InnoDB支持的哈希索引是自适应的，不能人为干预在一张表中生成哈希索引，innodb会根据表的使用情况自动生成哈希索引；</li>
<li>全文索引：InnoDB支持全文索引，但是每张表只能有一个全文检索的索引，一般都是使用倒排索引技术来实现。</li>
</ul>
<h2 id="聚集索引和非聚集索引"><a href="#聚集索引和非聚集索引" class="headerlink" title="聚集索引和非聚集索引"></a>聚集索引和非聚集索引</h2><p>聚集索引就是主键索引，其叶子节点就是记录的数据（页）。非聚集索引也叫做辅助索引，其叶子结点记录的是主键值。以表t为例说明如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">create table T (</span><br><span class="line">ID int primary key,</span><br><span class="line">k int NOT NULL DEFAULT 0,</span><br><span class="line">s varchar(16) NOT NULL DEFAULT &apos;&apos;,</span><br><span class="line">index k(k)) engine=InnoDB;</span><br><span class="line"></span><br><span class="line">insert into T values(100,1, &apos;aa&apos;),(200,2,&apos;bb&apos;),(300,3,&apos;cc&apos;),(500,5,&apos;ee&apos;),(600,6,&apos;ff&apos;);</span><br></pre></td></tr></table></figure></p>
<p>表T对应的主键索引和辅助索引如下：<br><img src="/2019/05/19/mysql-ji-chu-gai-nian-zhi-duo-shao/./MySQL基础概念知多少/20190519011710272.png" alt></p>
<h2 id="几个日志"><a href="#几个日志" class="headerlink" title="几个日志"></a>几个日志</h2><ul>
<li>redo log：记录的是页的物理操作，InnoDB通过将事务操作先写redo log，而不是将数据页的更新写磁盘，相当于将磁盘随机写(data文件)变成了顺序写(redo log)，后续在MySQL”空闲”时再慢慢写磁盘，提高服务器性能；</li>
<li>undo log：undo log保存了事务发生之前的数据的版本，可用于回滚，同时可提供多版本并发控制读（MVCC），也就是非锁定读。undo log是逻辑日志，在执行undo时，仅仅是将数据逻辑上恢复至事务之前的状态，而不是从物理页上操作的，这一条不同于redo log。事务开始时将当前版本生成undo log，undo也会产生redo来保证undo log可靠性；</li>
<li>binlog：binlog是mysql层面的归档日志，可用于主从复制和数据库基于时间点的还原。binlog记录的是逻辑日志，记录的是DDL和DML操作日志，可以简单认为是执行过的事务中的更新sql语句。</li>
<li>慢查询、错误日志等。</li>
</ul>
<h2 id="几个文件"><a href="#几个文件" class="headerlink" title="几个文件"></a>几个文件</h2><ul>
<li>.ibd文件和.ibdata文件：.ibd文件和ibdata文件都是存放innodb数据的文件，之所有有2个，因为innodb支持配置来决定是使用共享表空间还是独享表空间。独享表空间使用”.ibd”文件存储数据，并且每个表有一个.ibd文件；如果使用共享表空间，则会使用ibdata文件，所有表公用一个（或者配置多个）ibdata文件。</li>
<li>.ifm文件：存放表相关的元数据信息。</li>
</ul>
</div><div><ul class="post-copyright"><li class="post-copyright-author"><strong>本文作者：</strong>luoxn28</li><li class="post-copyright-link"><strong>本文链接：</strong><a href="/2019/05/19/mysql-ji-chu-gai-nian-zhi-duo-shao/">http://luoxn28.github.io/2019/05/19/mysql-ji-chu-gai-nian-zhi-duo-shao/</a></li><li class="post-copyright-license"><strong>版权声明：</strong>本文章著作权归作者所有，任何形式的转载都请注明出处。</li></ul></div><br><script type="text/javascript" src="/js/share.js?v=0.0.0" async></script><a class="article-share-link" data-url="http://luoxn28.github.io/2019/05/19/mysql-ji-chu-gai-nian-zhi-duo-shao/" data-id="ck8obhprp000pc7ciefu2yb90" data-qrcode="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAN4AAADeCAAAAAB3DOFrAAACmElEQVR42u3aUU4DMQwEUO5/aTgAKp1x4lWR3n6t2rTkLVLijvP1FV/ff16vxif3ySu/7y9feHh4eAtTT95NADkseWTR48bDw8Nb450s7q/+ZD71k/m8+SweHh7eR/ISZFLr5mPw8PDw/jsvKXNnBXQbTODh4eE9ybsVN+Tv5kt/Ho7g4eHhPcNrA4JPuF/p7+Hh4eEdd9XbJTsJFGZtreFs8fDw8BZ4+YJ7XvImwUFecOfzxMPDw9vgtQehZiXvSczRxsF4eHh4e7zZ1FvGrYZZffgADw8Pb4E3W+5vLfHt42ibdnh4eHgbvHaKs35TOyaPgIsGGB4eHt4Cr/2pn8e4SYCbb0JFYIGHh4e3zEvK5bzkTZpks7i2+Gfg4eHhrfFOGmDJ6+1nZw/xTUqNh4eHt8w7z4bbZX3jwAEeHh7eBm+jBZUfTZg12OrQGQ8PD+8qbxazJgcL2qMJbUssKuXx8PDwFnjtxnASrbYxxMkc8PDw8LZ5s/L31vgkkjjZuvDw8PA2eO2P/7YdlcPubhJ4eHh4e7xZhLpdNEcJdHlwAQ8PD++cd9K8z4OMPDKYbUUv54mHh4e3zDs5DjUrr9vtpG2n4eHh4W3w2qV/tnmchwtHMQceHh7eI7zki5LCOimmZyPzkAIPDw9vjzcrmtsI+DzUqFtueHh4eGu8/Md/vjHkEe1J1+7NGDw8PLyrvLul8OxAVT71uoWGh4eHt8DLr/MvbQPc/P7ChYeHh1fy2hj3vBk2K5GTjQoPDw/vSV5Szs4aUfnRq1u7WZFS4+Hh4T3COzlwkB+rSraf6FN4eHh4H8Nr22MtMmFEjwMPDw9vjdcee2pfuRVh1FEyHh4e3gJvFq22C3R7gLUdeS+9wMPDw/vj+gE2F2nOxXWExQAAAABJRU5ErkJggg==">分享</a><div class="tags"></div><div class="post-nav"><a class="pre" href="/2019/05/31/yi-wen-nong-dong-fen-bu-shi-suo/">一文弄懂分布式锁</a></div><div id="container"></div><link rel="stylesheet" type="text/css" href="//unpkg.com/gitalk/dist/gitalk.css?v=0.0.0"><script type="text/javascript" src="//cdn.bootcss.com/blueimp-md5/2.10.0/js/md5.js?v=0.0.0"></script><script type="text/javascript" src="//unpkg.com/gitalk/dist/gitalk.min.js?v=0.0.0"></script><script>var gitalk = new Gitalk({
  clientID: '0eda0c4ea18dd9042b41',
  clientSecret: 'df032ab700b83adbcaaf2f74eee0004c1ada25df',
  repo: 'luoxn28.github.io.gittalk',
  owner: 'luoxn28',
  admin: ['luoxn28'],
  id: md5(location.pathname),
  distractionFreeMode: false
})
gitalk.render('container')
</script></div></div></div><div class="pure-u-1-4 hidden_mid_and_down"><div id="sidebar"><div class="widget"><div class="search-form"><input id="local-search-input" placeholder="Search" type="text" name="q" results="0"><div id="local-search-result"></div></div></div><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> 分类</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Java/">Java</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/MySQL/">MySQL</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/分布式/">分布式</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/操作系统/">操作系统</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/框架研究/">框架研究</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/随笔/">随笔</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> 标签</i></div><div class="tagcloud"><a href="/tags/docker/" style="font-size: 15px;">docker</a> <a href="/tags/多线程/" style="font-size: 15px;">多线程</a> <a href="/tags/netty/" style="font-size: 15px;">netty</a> <a href="/tags/redis/" style="font-size: 15px;">redis</a> <a href="/tags/influxdb/" style="font-size: 15px;">influxdb</a> <a href="/tags/kubernetes/" style="font-size: 15px;">kubernetes</a> <a href="/tags/sentinel/" style="font-size: 15px;">sentinel</a> <a href="/tags/线上问题/" style="font-size: 15px;">线上问题</a> <a href="/tags/dubbo/" style="font-size: 15px;">dubbo</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> 最近文章</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2020/03/31/ye-shi-nei-cun-guan-li/">页式内存管理</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/03/17/group-by-zhong-zi-cha-xun-order-by-pai-xu-shi-xiao-wen-ti-fen-xi/">group by中子查询order by排序失效问题分析</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/03/16/transmittable-thread-local-xian-cheng-jian-shang-xia-wen-chuan-di-jie-jue-fang-an/">Transmittable-Thread-Local：线程间上下文传递解决方案</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/03/13/xian-cheng-chi-ru-he-chuan-di-xian-cheng-shang-xia-wen-xin-xi/">线程池如何传递线程上下文信息</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/03/08/tostring-ru-he-fan-xu-lie-hua/">ToString如何反序列化</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/02/29/java-bing-fa-gong-ju-lei/">Java并发工具类</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/02/19/yi-qi-liao-liao-3-ge-xian-cheng-yi-ci-da-yin-1-2-3-de-gu-shi/">一起聊聊3个线程依次打印1、2、3的故事</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/02/08/kubernetes-zhi-pod-na-xie-shi/">kubernetes之Pod那些事</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/01/28/influxdb-ru-men/">influxdb入门</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/01/28/influxdb-yuan-li-na-xie-shi/">influxdb原理那些事</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-external-link"> 友情链接</i></div><ul></ul><a href="http://www.example1.com/" title="site-name1" target="_blank">site-name1</a><ul></ul><a href="http://www.example2.com/" title="site-name2" target="_blank">site-name2</a><ul></ul><a href="http://www.example3.com/" title="site-name3" target="_blank">site-name3</a></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">Copyright © 2020 <a href="/." rel="nofollow">luoxn28.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div></div></div><a class="show" id="rocket" href="#top"></a><script type="text/javascript" src="/js/totop.js?v=0.0.0" async></script><script type="text/javascript" src="//lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js" async></script><script type="text/javascript" src="/js/fancybox.js?v=0.0.0" async></script><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css"><script type="text/javascript" src="/js/search.js?v=0.0.0"></script><script>var search_path = 'search.xml';
if (search_path.length == 0) {
   search_path = 'search.xml';
}
var path = '/' + search_path;
searchFunc(path, 'local-search-input', 'local-search-result');
</script><script type="text/javascript" src="/js/codeblock-resizer.js?v=0.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=0.0.0"></script></div></body></html>